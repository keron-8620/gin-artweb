# 完成button_usecase_test.go的单元测试计划

## 测试方法覆盖

我将为`ButtonUsecase`的所有方法编写测试用例，参考`api_usecase_test.go`和`menu_usecase_test.go`的测试风格：

### 1. 基础方法测试
- **TestGetMenu**: 测试获取按钮关联菜单的功能
- **TestGetApis**: 测试获取API列表的功能

### 2. 核心功能测试
- **TestCreateButton**: 测试创建按钮的功能
  - 正常创建按钮
  - 验证按钮ID生成
  - 验证权限策略添加
- **TestFindButtonByID**: 测试根据ID查找按钮的功能
  - 正常查找已创建的按钮
  - 查找不存在的按钮（错误情况）
- **TestUpdateButtonByID**: 测试更新按钮的功能
  - 正常更新按钮
  - 更新不存在的按钮（错误情况）
- **TestDeleteButtonByID**: 测试删除按钮的功能
  - 正常删除已创建的按钮
  - 删除不存在的按钮（错误情况）
- **TestListButton**: 测试列出按钮的功能
  - 创建多个按钮后验证列表返回
- **TestLoadButtonPolicy**: 测试加载按钮策略的功能
  - 创建按钮后验证策略加载

### 3. 错误处理测试
为所有方法添加上下文错误测试：
- **TestGetMenu_ContextError**
- **TestGetApis_ContextError**
- **TestCreateButton_ContextError**
- **TestFindButtonByID_ContextError**
- **TestUpdateButtonByID_ContextError**
- **TestDeleteButtonByID_ContextError**
- **TestListButton_ContextError**
- **TestLoadButtonPolicy_ContextError**

## 测试结构和风格

- 使用`suite`测试框架
- 每个测试用例独立运行
- 验证返回值的正确性
- 验证数据库操作的结果
- 验证权限策略的添加和移除
- 测试错误处理情况
- 保持与`api_usecase_test.go`和`menu_usecase_test.go`一致的代码风格

## 实现步骤

1. 为每个方法编写对应的测试用例
2. 确保测试覆盖所有正常和错误情况
3. 验证权限策略的正确性
4. 测试上下文错误处理
5. 运行测试确保所有测试通过