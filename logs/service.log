{"level":"error","time":"2025-09-30T17:14:20.723+0800","caller":"auth/middleware.go:15","msg":"error: code=403 reason = forbidden msg = 您没有访问该资源的权限 data = map[] cause = <nil>"}
{"level":"error","time":"2025-09-30T17:14:20.756+0800","caller":"auth/middleware.go:15","msg":"error: code=403 reason = forbidden msg = 您没有访问该资源的权限 data = map[] cause = <nil>"}
{"level":"info","time":"2025-10-14T10:55:33.853+0800","caller":"service/permission.go:53","msg":"ListPermission","query":{"http_url like ?":"pk","id in ?":[1,2,3],"method = ?":"GET"}}
{"level":"info","time":"2025-10-14T11:02:26.533+0800","caller":"service/permission.go:53","msg":"ListPermission","query":{"http_url like ?":"%pk%","id in ?":[1,2,3],"method = ?":"GET"}}
{"level":"info","time":"2025-10-14T11:05:08.195+0800","caller":"service/permission.go:53","msg":"ListPermission","query":{"id in ?":[1,2,3],"method = ?":"GET"}}
{"level":"error","time":"2025-10-14T13:02:31.871+0800","caller":"data/permission.go:34","msg":"duplicated key not allowed"}
{"level":"error","time":"2025-10-14T13:02:31.871+0800","caller":"biz/permission.go:36","msg":"error: code=0 reason = GormDuplicatedKey msg = 唯一性约束冲突 data = map[created_at:2025-10-14 13:02:31 descr: http_url:/api/v1/test id:0 method:GET updated_at:2025-10-14 13:02:31] cause = duplicated key not allowed"}
{"level":"error","time":"2025-10-14T13:03:55.099+0800","caller":"data/permission.go:34","msg":"duplicated key not allowed"}
{"level":"error","time":"2025-10-14T13:03:55.099+0800","caller":"biz/permission.go:36","msg":"error: code=0 reason = GormDuplicatedKey msg = 唯一性约束冲突 data = map[created_at:2025-10-14 13:03:55 descr: http_url:/api/v1/test id:0 method:GET updated_at:2025-10-14 13:03:55] cause = duplicated key not allowed"}
{"level":"error","time":"2025-10-14T13:47:14.260+0800","caller":"service/permission.go:30","msg":"error: code=0 reason = validation msg = 参数验证错误 data = map[] cause = Key: 'CreatePermissionRequest.Id' Error:Field validation for 'Id' failed on the 'required' tag"}
{"level":"error","time":"2025-10-14T13:56:31.726+0800","caller":"service/permission.go:32","msg":"error: code=0 reason = validation msg = 参数验证错误 data = map[] cause = Key: 'CreatePermissionRequest.Id' Error:Field validation for 'Id' failed on the 'required' tag"}
{"level":"error","time":"2025-10-14T14:05:53.428+0800","caller":"service/permission.go:30","msg":"error: code=400 reason = validation msg = 参数验证错误 data = map[] cause = Key: 'CreatePermissionRequest.Id' Error:Field validation for 'Id' failed on the 'required' tag"}
{"level":"error","time":"2025-10-14T14:12:18.509+0800","caller":"service/permission.go:54","msg":"error: code=400 reason = validation msg = 参数验证错误 data = map[] cause = Key: 'UpdatePermissionRequest.Pk' Error:Field validation for 'Pk' failed on the 'required' tag"}
{"level":"error","time":"2025-10-16T15:36:46.324+0800","caller":"service/permission.go:42","msg":"error: code=400 reason = validation msg = 参数验证错误 data = map[] cause = Key: 'CreatePermissionRequest.Id' Error:Field validation for 'Id' failed on the 'required' tag"}
{"level":"error","time":"2025-10-16T15:38:10.602+0800","caller":"data/permission.go:63","msg":"record not found"}
{"level":"error","time":"2025-10-16T15:38:10.602+0800","caller":"biz/permission.go:98","msg":"error: code=400 reason = GormRecordNotFound msg = 记录未找到 data = map[id:0] cause = record not found"}
{"level":"error","time":"2025-10-16T15:38:43.201+0800","caller":"data/permission.go:63","msg":"record not found"}
{"level":"error","time":"2025-10-16T15:38:43.201+0800","caller":"biz/permission.go:98","msg":"error: code=400 reason = GormRecordNotFound msg = 记录未找到 data = map[id:0] cause = record not found"}
{"level":"error","time":"2025-10-16T15:50:18.926+0800","caller":"service/permission.go:142","msg":"error: code=400 reason = validation msg = 参数验证错误 data = map[] cause = Key: 'PkUri.Pk' Error:Field validation for 'Pk' failed on the 'required' tag"}
{"level":"error","time":"2025-10-16T15:54:03.727+0800","caller":"service/permission.go:83","msg":"error: code=400 reason = validation msg = 参数验证错误 data = map[] cause = Key: 'UpdatePermissionRequest.Method' Error:Field validation for 'Method' failed on the 'oneof' tag"}
{"level":"error","time":"2025-10-16T16:11:56.830+0800","caller":"data/menu.go:63","msg":"record not found"}
{"level":"error","time":"2025-10-16T16:11:56.830+0800","caller":"biz/menu.go:99","msg":"error: code=400 reason = GormRecordNotFound msg = 记录未找到 data = map[parent_id:0] cause = record not found"}
{"level":"error","time":"2025-10-16T16:13:39.346+0800","caller":"data/menu.go:34","msg":"violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:13:39.346+0800","caller":"biz/menu.go:140","msg":"error: code=400 reason = GormForeignKeyViolated msg = 外键约束冲突 data = map[arrange_order:10000 component:@/views/system/test1config created_at:2025-10-16 16:13:39 id:1 is_active:true meta:{\"title\":\"测试\",\"icon\":\"\"} name:Test1Config parent_id:0 path:test1config updated_at:2025-10-16 16:13:39] cause = violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:16:09.097+0800","caller":"data/menu.go:34","msg":"pq: relation \"auth_menu_permission\" does not exist on sgnode"}
{"level":"error","time":"2025-10-16T16:16:09.097+0800","caller":"biz/menu.go:143","msg":"error: code=500 reason = unknown msg = 未知错误 data = map[arrange_order:10000 component:@/views/system/test1config created_at:2025-10-16 16:16:09 id:1 is_active:true meta:{\"title\":\"测试\",\"icon\":\"\"} name:Test1Config parent_id: path:test1config updated_at:2025-10-16 16:16:09] cause = pq: relation \"auth_menu_permission\" does not exist on sgnode"}
{"level":"error","time":"2025-10-16T16:21:23.094+0800","caller":"data/menu.go:42","msg":"sql: converting argument $5 type: unsupported type biz.Meta, a struct"}
{"level":"error","time":"2025-10-16T16:21:23.094+0800","caller":"biz/menu.go:165","msg":"error: code=500 reason = unknown msg = 未知错误 data = map[ArrangeOrder:10000 Component:@/views/system/test2config Descr: IsActive:true Meta:{测试 } Name:Test2Config ParentId:0xc00025aed0 Path:test2config] cause = sql: converting argument $5 type: unsupported type biz.Meta, a struct"}
{"level":"error","time":"2025-10-16T16:23:36.843+0800","caller":"data/menu.go:42","msg":"pq: invalid input syntax for type json"}
{"level":"error","time":"2025-10-16T16:23:36.843+0800","caller":"biz/menu.go:165","msg":"error: code=500 reason = unknown msg = 未知错误 data = map[ArrangeOrder:10000 Component:@/views/system/test2config Descr: IsActive:true Meta:{\"icon\":,\"title\":测试} Name:Test2Config ParentId:0xc000015800 Path:test2config] cause = pq: invalid input syntax for type json"}
{"level":"error","time":"2025-10-16T16:25:50.654+0800","caller":"data/menu.go:42","msg":"violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:25:50.654+0800","caller":"biz/menu.go:165","msg":"error: code=400 reason = GormForeignKeyViolated msg = 外键约束冲突 data = map[ArrangeOrder:10000 Component:@/views/system/test2config Descr: IsActive:true Meta:{\"title\":\"测试\",\"icon\":\"\"} Name:Test2Config ParentId:0xc0001e2f10 Path:test2config] cause = violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:34:46.936+0800","caller":"data/menu.go:42","msg":"violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:34:46.936+0800","caller":"biz/menu.go:172","msg":"error: code=400 reason = GormForeignKeyViolated msg = 外键约束冲突 data = map[ArrangeOrder:10000 Component:@/views/system/test2config Descr: IsActive:true Meta:{\"title\":\"测试\",\"icon\":\"\"} Name:Test2Config ParentId:<nil> Path:test2config] cause = violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:41:12.997+0800","caller":"middleware/error.go:33","msg":"panic recovered","error":"runtime error: invalid memory address or nil pointer dereference","method":"PUT","url":"/api/v1/customer/menu/2","client_ip":"192.168.10.12","user_agent":"PostmanRuntime-ApipostRuntime/1.1.0","stack":"goroutine 29 [running]:\nruntime/debug.Stack()\n\t/snap/go/10971/src/runtime/debug/stack.go:26 +0x5e\nmain.newRouter.ErrorMiddleware.func2.1()\n\t/home/quant/Document/project/go-dango-gin/pkg/middleware/error.go:20 +0x54\npanic({0x140f220?, 0x2207fe0?})\n\t/snap/go/10971/src/runtime/panic.go:783 +0x132\ngitee.com/keion8620/go-dango-gin/internal/customer/biz.(*MenuUsecase).UpdateMenuById(0xc000361560, {0x1800cf8, 0xc0007d6000}, 0x2, {0xc000c56180?, 0x15671e0?, 0xc000c3e0c0?}, 0xc000c4b3e0)\n\t/home/quant/Document/project/go-dango-gin/internal/customer/biz/menu.go:163 +0x139\ngitee.com/keion8620/go-dango-gin/internal/customer/service.(*MenuService).UpdateMenu(0xc00031fdd0, 0xc0007d6000)\n\t/home/quant/Document/project/go-dango-gin/internal/customer/service/menu.go:105 +0x6c5\ngithub.com/gin-gonic/gin.(*Context).Next(0xc0007d6000)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192 +0x4e\nmain.newRouter.CorsMiddleware.func3(0xc0007d6000)\n\t/home/quant/Document/project/go-dango-gin/pkg/middleware/cors.go:41 +0x12b\ngithub.com/gin-gonic/gin.(*Context).Next(0xc0007d6000)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192 +0x4e\nmain.newRouter.ErrorMiddleware.func2(0xc0007d6000)\n\t/home/quant/Document/project/go-dango-gin/pkg/middleware/error.go:48 +0x76\ngithub.com/gin-gonic/gin.(*Context).Next(0xc0007d6000)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192 +0x4e\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1(0xc0007d6000)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249 +0xca\ngithub.com/gin-gonic/gin.(*Context).Next(0xc0007d6000)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192 +0x4e\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc000712680, 0xc0007d6000)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689 +0x435\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000712680, {0x17fda98, 0xc000c6e0f0}, 0xc0001f4b40)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643 +0x1ad\nnet/http.serverHandler.ServeHTTP({0x17f8df0?}, {0x17fda98?, 0xc000c6e0f0?}, 0x1?)\n\t/snap/go/10971/src/net/http/server.go:3340 +0x8e\nnet/http.(*conn).serve(0xc00075e090, {0x1800488, 0xc0002764e0})\n\t/snap/go/10971/src/net/http/server.go:2109 +0x665\ncreated by net/http.(*Server).Serve in goroutine 10\n\t/snap/go/10971/src/net/http/server.go:3493 +0x485\n"}
{"level":"error","time":"2025-10-16T16:42:54.105+0800","caller":"data/menu.go:42","msg":"violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:42:54.105+0800","caller":"biz/menu.go:162","msg":"error: code=400 reason = GormForeignKeyViolated msg = 外键约束冲突 data = map[ArrangeOrder:10000 Component:@/views/system/test2config Descr: IsActive:true Meta:{\"title\":\"测试\",\"icon\":\"\"} Name:Test2Config ParentId:<nil> Path:test2config] cause = violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:46:31.838+0800","caller":"data/menu.go:42","msg":"violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:46:31.838+0800","caller":"biz/menu.go:162","msg":"error: code=400 reason = GormForeignKeyViolated msg = 外键约束冲突 data = map[ArrangeOrder:10000 Component:@/views/system/test2config Descr: IsActive:true Meta:{\"title\":\"测试\",\"icon\":\"\"} Name:Test2Config Path:test2config] cause = violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:47:48.565+0800","caller":"data/menu.go:42","msg":"violates foreign key constraint"}
{"level":"error","time":"2025-10-16T16:47:48.565+0800","caller":"biz/menu.go:162","msg":"error: code=400 reason = GormForeignKeyViolated msg = 外键约束冲突 data = map[ArrangeOrder:10000 Component:@/views/system/test2config Descr: IsActive:true Meta:{\"title\":\"测试\",\"icon\":\"\"} Name:Test2Config ParentId:<nil> Path:test2config] cause = violates foreign key constraint"}
{"level":"error","time":"2025-10-16T17:03:32.039+0800","caller":"data/button.go:42","msg":"violates foreign key constraint"}
{"level":"error","time":"2025-10-16T17:03:32.039+0800","caller":"biz/button.go:135","msg":"error: code=400 reason = GormForeignKeyViolated msg = 外键约束冲突 data = map[ArrangeOrder:10000 Descr: IsActive:true Name:nodescigAdd] cause = violates foreign key constraint"}
{"level":"error","time":"2025-10-16T17:08:57.240+0800","caller":"middleware/error.go:33","msg":"panic recovered","error":"runtime error: invalid memory address or nil pointer dereference","method":"POST","url":"/api/v1/customer/role","client_ip":"192.168.10.12","user_agent":"PostmanRuntime-ApipostRuntime/1.1.0","stack":"goroutine 68 [running]:\nruntime/debug.Stack()\n\t/snap/go/10971/src/runtime/debug/stack.go:26 +0x5e\nmain.newRouter.ErrorMiddleware.func2.1()\n\t/home/quant/Document/project/go-dango-gin/pkg/middleware/error.go:20 +0x54\npanic({0x1427f60?, 0x2233ff0?})\n\t/snap/go/10971/src/runtime/panic.go:783 +0x132\ngitee.com/keion8620/go-dango-gin/pkg/auth.(*AuthCache).SetRolePerm(0x0, 0x2, 0xc000d39230)\n\t/home/quant/Document/project/go-dango-gin/pkg/auth/cache.go:73 +0x2d\ngitee.com/keion8620/go-dango-gin/internal/customer/data.(*roleRepo).SetRolePerm(0xc000013f38, {0x181f458, 0xc000caa100}, 0x2, 0xc000d39230)\n\t/home/quant/Document/project/go-dango-gin/internal/customer/data/role.go:136 +0x6c\ngitee.com/keion8620/go-dango-gin/internal/customer/biz.(*RoleUsecase).setRolePerms(0xc00060d270, {0x181f458, 0xc000caa100}, 0x2)\n\t/home/quant/Document/project/go-dango-gin/internal/customer/biz/role.go:247 +0x23e\ngitee.com/keion8620/go-dango-gin/internal/customer/biz.(*RoleUsecase).CreateRole(0xc00060d270, {0x181f458, 0xc000caa100}, {0x0, 0x0, 0x0}, {0x0, _, _}, {0x0, ...}, ...)\n\t/home/quant/Document/project/go-dango-gin/internal/customer/biz/role.go:143 +0x490\ngitee.com/keion8620/go-dango-gin/internal/customer/service.(*RoleService).CreateRole(0xc000059d30, 0xc000caa100)\n\t/home/quant/Document/project/go-dango-gin/internal/customer/service/role.go:38 +0x20d\ngithub.com/gin-gonic/gin.(*Context).Next(0xc000caa100)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192 +0x4e\nmain.newRouter.CorsMiddleware.func3(0xc000caa100)\n\t/home/quant/Document/project/go-dango-gin/pkg/middleware/cors.go:41 +0x12b\ngithub.com/gin-gonic/gin.(*Context).Next(0xc000caa100)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192 +0x4e\nmain.newRouter.ErrorMiddleware.func2(0xc000caa100)\n\t/home/quant/Document/project/go-dango-gin/pkg/middleware/error.go:48 +0x76\ngithub.com/gin-gonic/gin.(*Context).Next(0xc000caa100)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192 +0x4e\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1(0xc000caa100)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/logger.go:249 +0xca\ngithub.com/gin-gonic/gin.(*Context).Next(0xc000caa100)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/context.go:192 +0x4e\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc000316b60, 0xc000caa100)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:689 +0x435\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc000316b60, {0x181c1f8, 0xc0000f81e0}, 0xc000222140)\n\t/home/quant/go/pkg/mod/github.com/gin-gonic/gin@v1.11.0/gin.go:643 +0x1ad\nnet/http.serverHandler.ServeHTTP({0x1817550?}, {0x181c1f8?, 0xc0000f81e0?}, 0x1?)\n\t/snap/go/10971/src/net/http/server.go:3340 +0x8e\nnet/http.(*conn).serve(0xc00014e120, {0x181ebe8, 0xc0001e84e0})\n\t/snap/go/10971/src/net/http/server.go:2109 +0x665\ncreated by net/http.(*Server).Serve in goroutine 14\n\t/snap/go/10971/src/net/http/server.go:3493 +0x485\n"}
{"level":"error","time":"2025-10-16T17:57:54.643+0800","caller":"data/role.go:39","msg":"duplicated key not allowed"}
{"level":"error","time":"2025-10-16T17:57:54.643+0800","caller":"biz/role.go:140","msg":"error: code=400 reason = GormDuplicatedKey msg = 唯一性约束冲突 data = map[created_at:2025-10-16 17:57:54 descr:测试角色 id:0 name:test updated_at:2025-10-16 17:57:54] cause = duplicated key not allowed"}
{"level":"error","time":"2025-10-16T18:02:05.802+0800","caller":"data/role.go:39","msg":"duplicated key not allowed"}
{"level":"error","time":"2025-10-16T18:02:05.802+0800","caller":"biz/role.go:140","msg":"error: code=400 reason = GormDuplicatedKey msg = 唯一性约束冲突 data = map[created_at:2025-10-16 18:02:05 descr:测试角色 id:0 name:test updated_at:2025-10-16 18:02:05] cause = duplicated key not allowed"}
{"level":"error","time":"2025-10-23T10:02:38.907+0800","caller":"auth/middleware.go:45","msg":"error: code=403 reason = forbidden msg = 您没有访问该资源的权限 data = map[] cause = <nil>"}
{"level":"error","time":"2025-10-23T10:02:47.265+0800","caller":"auth/middleware.go:45","msg":"error: code=403 reason = forbidden msg = 您没有访问该资源的权限 data = map[] cause = <nil>"}
{"level":"error","time":"2025-10-23T10:05:00.754+0800","caller":"auth/middleware.go:45","msg":"error: code=403 reason = forbidden msg = 您没有访问该资源的权限 data = map[] cause = <nil>"}
{"level":"error","time":"2025-10-23T10:09:42.254+0800","caller":"auth/middleware.go:45","msg":"error: code=403 reason = forbidden msg = 您没有访问该资源的权限 data = map[] cause = <nil>"}
