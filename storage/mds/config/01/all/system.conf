#
# 系统配置文件
# 用于配置所有的引擎（Engine）、服务（Server）及所属的处理函数（Action）
#
# 配置变量说明
# - 环境号:  ${@@} or ${ENV_NUM}
# - 主机号:  ${!!} or ${HOST_NUM}
# - 集群号:  ${++} or ${SET_NUM}
#
# 节点类型（hostType）说明
# - default
# - arbiter
# - backup
#


############################################################
# 集群和环境号相关的配置变量设置
############################################################

!CALL   ${ENV_NUM_01=01}	${IS_ARBITER_01=}	${IP_ADDR_01=127.0.0.1}		${MAC_ADDR_01=}
!CALL   ${ENV_NUM_02=02}	${IS_ARBITER_02=}	${IP_ADDR_02=127.0.0.1}		${MAC_ADDR_02=}
!CALL   ${ENV_NUM_03=03}	${IS_ARBITER_03=1}	${IP_ADDR_03=127.0.0.1}		${MAC_ADDR_03=}
!CALL   ${ENV_NUM_04=04}	${IS_ARBITER_04=}	${IP_ADDR_04=127.0.0.1}		${MAC_ADDR_04=}
!CALL   ${ENV_NUM_05=05}	${IS_ARBITER_05=}	${IP_ADDR_05=127.0.0.1}		${MAC_ADDR_05=}
!CALL   ${ENV_NUM_06=06}	${IS_ARBITER_06=}	${IP_ADDR_06=127.0.0.1}		${MAC_ADDR_06=}
!CALL   ${ENV_NUM_07=07}	${IS_ARBITER_07=}	${IP_ADDR_07=127.0.0.1}		${MAC_ADDR_07=}

!CALL   ${HOST_NUM:=01}     ${SET_NUM:=00}
!CALL   ${SET_NRW:=1 1 1}   ${SET_MEMBERS:=1}
#CALL   ${SET_NRW:=2 1 1}   ${SET_MEMBERS:=1 2}
#CALL   ${SET_NRW:=3 1 1}   ${SET_MEMBERS:=1 2 3}
!CALL   ${IS_ARBITER:=${IS_ARBITER_${!!}}}


############################################################
# IP地址相关的配置变量设置
############################################################

# 上交所MDGW-Lv1行情网关地址
#CALL   ${SSE_MDGW_IP_1=}
#CALL   ${SSE_MDGW_IP_2=}
#CALL   ${SSE_MDGW_PORT=50010}
#CALL   ${SSE_MDGW_PORT_1=50010}
#CALL   ${SSE_MDGW_PORT_2=50010}

# 上交所VDE-Lv2行情网关地址
# - SSE_L2_VDE_PARALLEL 表示待同时对接的另外一路VDE行情源, 若配置则将同时对接两路VDE行情 (多路择优)
#CALL   ${SSE_L2_VDE_ADDR=tcp://}
#CALL   ${SSE_L2_VDE_PARALLEL=tcp://}
#CALL   ${SSE_L2_REBUILD_ADDR=tcp://}

# 深交所MDGW-Lv1行情网关地址
#CALL   ${SZSE_L1_MDGW_IP_1=} ${SZSE_L1_MDGW_ID_1=N999999Q0149} ${SZSE_L1_MDGW_PASSWORD_1=N999999Q0149}
#CALL   ${SZSE_L1_MDGW_IP_2=} ${SZSE_L1_MDGW_ID_2=N999999Q0149} ${SZSE_L1_MDGW_PASSWORD_2=N999999Q0149}
#CALL   ${SZSE_L1_MDGW_PORT=8016}
#CALL   ${SZSE_L1_MDGW_PORT_1=8016}
#CALL   ${SZSE_L1_MDGW_PORT_2=8016}

# 深交所MDGW-Lv2行情网关地址
#CALL   ${SZSE_L2_MDGW_IP_1=} ${SZSE_L2_MDGW_ID_1=N999999Q0149} ${SZSE_L2_MDGW_PASSWORD_1=N999999Q0149}
#CALL   ${SZSE_L2_MDGW_IP_2=} ${SZSE_L2_MDGW_ID_2=N999999Q0149} ${SZSE_L2_MDGW_PASSWORD_2=N999999Q0149}
#CALL   ${SZSE_L2_MDGW_PORT=8101 8102 8103}
#CALL   ${SZSE_L2_MDGW_PORT_1=8101 8102 8103}
#CALL   ${SZSE_L2_MDGW_PORT_2=8101 8102 8103}
#CALL   ${SZSE_L2_REBUILD_ADDR=tcp://${SZSE_L2_MDGW_IP_1}:8018, tcp://${SZSE_L2_MDGW_IP_2}:8018}

# 深交所MDDP组播行情地址
#CALL   ${SZSE_L2_MDGW_MCAST_IP_1=232.100.100.1}
#CALL   ${SZSE_L2_MDGW_MCAST_IP_2=232.100.100.2}
#CALL   ${SZSE_L2_MDGW_MCAST_PORT=8201 8202 8203}
#CALL   ${SZSE_L2_MDGW_MCAST_PORT_1=8201 8202 8203}
#CALL   ${SZSE_L2_MDGW_MCAST_PORT_2=8201 8202 8203}
#CALL   ${SZSE_L2_MDGW_MCAST_INTERFACE_IP=}
#CALL   ${SZSE_L2_MDGW_MCAST_INTERFACE_IP_1=}
#CALL   ${SZSE_L2_MDGW_MCAST_INTERFACE_IP_2=}

# 北交所DBF行情库(NQHQ)目录
#CALL   ${BSE_DBF_NQHQ_PATH=${APP_HOME}/data}

# MDS行情广播的组播地址 (交易所行情)
#CALL   ${MDS_BROADCAST_ADDR_SNAP1=udp-mcast://232.200.151.1${++}:5301}
#CALL   ${MDS_BROADCAST_ADDR_SNAP2=udp-mcast://232.200.152.1${++}:5302}
#CALL   ${MDS_BROADCAST_ADDR_TICK1=udp-mcast://232.200.153.1${++}:5303}
#CALL   ${MDS_BROADCAST_ADDR_TICK2=udp-mcast://232.200.154.1${++}:5304}
#CALL   ${MDS_BROADCAST_INTERFACE_IP=}

# MDS行情广播的组播地址 (订单簿快照)
#CALL   ${MDS_BROADCAST_ADDR_LOB_SNAP1=udp-mcast://232.200.155.1${++}:5311}
#CALL   ${MDS_BROADCAST_ADDR_LOB_SNAP2=udp-mcast://232.200.156.1${++}:5312}
#CALL   ${MDS_BROADCAST_INTERFACE_IP_LOB_SNAP=}

# 级联的MDS-UDP行情对接地址 (通过级联的MDS对接转发行情)
#CALL   ${CASCADE_MDS_UDP_SNAP1_ADDR=udp-mcast://232.200.151.100:5301}
#CALL   ${CASCADE_MDS_UDP_SNAP2_ADDR=udp-mcast://232.200.152.100:5302}
#CALL   ${CASCADE_MDS_UDP_TICK1_ADDR=udp-mcast://232.200.153.100:5303}
#CALL   ${CASCADE_MDS_UDP_TICK2_ADDR=udp-mcast://232.200.154.100:5304}
#CALL   ${CASCADE_MDS_UDP_INTERFACE_IP=}
!CALL   ${CASCADE_MDS_UDP_ANY=${CASCADE_MDS_UDP_SNAP1_ADDR:-${CASCADE_MDS_UDP_SNAP2_ADDR:-${CASCADE_MDS_UDP_TICK1_ADDR:-${CASCADE_MDS_UDP_TICK2_ADDR}}}}}

# 级联的MDS-TCP行情对接地址 (通过级联的MDS对接转发行情, @note 需要根据实际情况开启沪/深使能标志)
#CALL   ${CASCADE_MDS_TCP_ADDR=tcp://}
!CALL   ${CASCADE_MDS_TCP_USERNAME=mdsuser}
!CALL   ${CASCADE_MDS_TCP_PASSWORD=123456}
!CALL   ${CASCADE_MDS_TCP_ENABLE_SSE=0}
!CALL   ${CASCADE_MDS_TCP_ENABLE_SZSE=0}
!CALL   ${CASCADE_MDS_TCP_ENABLE_BSE=0}

# 级联的MDS逐笔数据重传服务地址 (通过级联的MDS重建上交所/深交所逐笔数据, @note 需要根据实际情况开启沪/深使能标志)
#CALL   ${CASCADE_MDS_RESEND_ADDR=tcp://}
!CALL   ${CASCADE_MDS_RESEND_USERNAME=mdsuser}
!CALL   ${CASCADE_MDS_RESEND_PASSWORD=123456}
!CALL   ${CASCADE_MDS_RESEND_ENABLE_SSE=0}
!CALL   ${CASCADE_MDS_RESEND_ENABLE_SZSE=0}


############################################################
# 系统运行参数相关的配置变量设置
############################################################

# 主存库是否启用大页内存 (不配置或者配置为空时, 不使用大页内存; 有任意配置值时, 启用大页内存)
#CALL   ${ENABLE_SDB_HUGEPAGE=}
# NUMA节点0的0号CPU核编号 (CPU编号从1开始)
#CALL   ${NUMA_NODE0_CPU0=}
# NUMA节点1的0号CPU核编号 (CPU编号从1开始)
#CALL   ${NUMA_NODE1_CPU0=}

# 科创成长层股票新注册日期分界线 (默认为20250713)
#CALL   ${SSE_KSH_GROWTH_NEW_REG_DATE_LINE=20250713}

# 控制深交所MDGW行情网关的登录行为 (默认为0)
#CALL   ${NO_SZSE_MDGW_LOGON=0} ${NO_SZSE_MDGW_LOGON_RSP=0}
# 控制上交所MDGW行情网关的登录行为 (默认为0)
#CALL   ${NO_SSE_MDGW_LOGON=0} ${NO_SSE_MDGW_LOGON_RSP=0}
# 控制上交所VDE行情网关的登录行为 (默认为0)
#CALL   ${NO_SSE_VDE_LOGON=0} ${NO_SSE_VDE_LOGON_RSP=0}
# 连接上交所VDE重建服务时是否执行登录操作 (0:无需登录, 1:需要登录. 默认为0)
#CALL   ${IS_SSE_VDE_REBUILD_LOGON_ABLE=0}

# 采用竞争模式(多系统共用)对接上交所行情网关的逐笔重建服务 (默认为0)
#CALL   ${MDS_TICK_REBUILD_COMPETING_SSE=0}
# 采用竞争模式(多系统共用)对接深交所行情网关的逐笔重建服务 (默认为0)
#CALL   ${MDS_TICK_REBUILD_COMPETING_SZSE=0}
# 启用上交所股票/基金逐笔数据重建 (0:不重建, 1:重建, 2:仅盘后重建. 默认为1)
#CALL   ${ENABLE_SSE_STK_TICK_REBUILD=1}
# 启用上交所债券逐笔数据重建 (0:不重建, 1:重建, 2:仅盘后重建. 默认为1)
#CALL   ${ENABLE_SSE_BOND_TICK_REBUILD=1}
# 禁用深交所MDGW行情网关重建通道的心跳消息 (默认为0)
#CALL   ${DISABLE_SZSE_MDGW_REBUILD_HEARTBT=0}
# 输出深交所MDGW行情网关的频道统计信息 (默认为0)
#CALL   ${ENABLE_SZSE_MDGW_CHANNEL_STATS=0}

# 启用逐笔数据去重处理 (不配置或者配置为空:自动检测是否需要启用, 0:禁用逐笔数据去重处理, 1:启用逐笔数据去重处理. 默认自动检测)
# - @note: 如果对接了第三方转发的行情, 则需要显式设置为 1
#CALL   ${ENABLE_TICK_DEDUP=}
# 禁用逐笔数据存储和重传服务 (不配置或者配置为空:不禁用, 1:禁用逐笔数据存储和重传服务. 默认不禁用)
#CALL   ${NO_TICK_RESEND=}
# 禁用订单簿重建功能 (不配置或者配置为空:不禁用, 1:禁用订单簿重建功能. 默认不禁用)
#CALL   ${NO_ORDER_BOOK=}
# 不生成行情数据日志 (0:生成日志, 1:不生成日志. 默认为0)
#CALL   ${NO_MDS_TXLOG=0}


############################################################
# 系统全局配置
############################################################

[global]
hostNum = ${HOST_NUM}
hostType = ${HOST_TYPE:=${IS_ARBITER:!default}${IS_ARBITER:+arbiter}}
setNum = ${SET_NUM}
envNum = ${ENV_NUM:=${ENV_NUM_${!!}:-${!!}}}

sysName = MDS
sysFullname = Market Data Service[${@@}]${IS_ARBITER:+ (Arbiter)}

set.members = ${SET_MEMBERS}
set.NRW = ${SET_NRW}
set.leaderTimeoutSecs = 20


[system]
# 是否允许MDS客户端修改密码 (默认不允许)
isChangePwdAble = 0

# 禁止登录密码验证 (禁止后则不对登录密码进行验证, 默认不禁止)
disablePasswordAuthentication = no

# 禁止客户端修改密码的开始时间 (HHMMSS)
# - 有效时间范围[0~240000], 不配置、配置空值或取值不在有效时间范围内的则默认设置为0
#forbidChangePwdBeginTime =
# 禁止客户端修改密码的结束时间 (HHMMSS)
# - 有效时间范围[0~240000], 不配置、配置空值或取值不在有效时间范围内的则默认设置为150000
# - 配置示例:
#   - forbidChangePwdBeginTime=93000, forbidChangePwdEndTime=150000 表示:
#     9:30之前和15:00之后允许修改密码
#   - forbidChangePwdBeginTime=150000, forbidChangePwdEndTime=93000 表示:
#     9:30至15:00之间允许修改密码
#   - forbidChangePwdBeginTime=0, forbidChangePwdEndTime=0 表示:
#     全天均允许修改密码
#forbidChangePwdEndTime = 150000

# 客户端密码允许的最小长度, 0代表无限制
#minClientPasswordLen = 6

# 客户端密码强度级别
# 密码强度范围[0~4], 代表密码含有字符串种类(大小写字母、数字、有效符号)的个数
#clientPasswordStrength = 3

# 是否启用登录IP过滤器检查 (即登录IP黑白名单功能, 默认不启用)
#apiIpFilter = no

# 登录IP过滤规则的层级策略 (仅开启登录IP过滤器检查时生效)
#  - 0, 继承策略: 未命中客户规则, 则继续匹配DEFAULT规则 (默认值)
#  - 1, 覆盖策略: 配置了客户规则(无论是否命中), 则忽略DEFAULT规则
#ipFilterHierarchicalPolicy = 0


############################################################
# 子系统配置
#
# 配置项说明
# - fullname         : 子系统全称
# - logCategoryField : 子系统对应的日志配置域名称
# - runLevel         : 是否可自动启动 (0:无需运行, 1:必须运行, 2:可选运行(可执行程序必须存在), 3:可有可无(不要求程序必须存在))
# - aloneAble        : 是否可驻留
# - startupExe       : 启动时的命令行参数
# - startupParams    : 启动时的附加环境变量
# - startupEnvVars   : 启动子系统时附加的环境变量 (以逗号分隔, 形如 key1=value,key2=value 的环境变量列表)
############################################################

[subsystems]
scheduler.runLevel = 1
monagent.runLevel = 1
sequencer.runLevel = 1
processor.runLevel = 1
publisher.runLevel = 1
forwarder.runLevel = 1
querier.runLevel = 1
collector.runLevel = 2
l2_collector_sse.runLevel = 2
l2_collector_szse.runLevel = 2
broadcaster.runLevel = 2
order_book.runLevel = 2
latency.runLevel = 1

#
# @note 启用Onload时的注意事项:
# - 对于并发服务, 当指定 concurrencyMode=3 (Reuseport) 时, 必须设置 EF_CLUSTER_SIZE=n, 且 n 的取值必须和 childrenNum 相同。
#
#publisher.startupExe = onload
#publisher.startupParams = --profile=latency ./publisher start
#publisher.startupEnvVars = LD_PRELOAD=/usr/lib64/libonload.so, EF_POLL_USEC=100000, EF_TXQ_SIZE=2048

#broadcaster.startupExe = onload
#broadcaster.startupParams = --profile=latency ./broadcaster start
#broadcaster.startupEnvVars = LD_PRELOAD=/usr/lib64/libonload.so, EF_POLL_USEC=100000, EF_TXQ_SIZE=2048

#l2_collector_sse.startupExe = onload
#l2_collector_sse.startupParams = --profile=latency ./l2_collector_sse start
#l2_collector_sse.startupEnvVars = LD_PRELOAD=/usr/lib64/libonload.so, EF_POLL_USEC=100000, EF_RXQ_SIZE=2048

#l2_collector_szse.startupExe = onload
#l2_collector_szse.startupParams = --profile=latency ./l2_collector_szse start
#l2_collector_szse.startupEnvVars = LD_PRELOAD=/usr/lib64/libonload.so, EF_POLL_USEC=100000, EF_RXQ_SIZE=2048

#collector.startupExe = onload
#collector.startupParams = --profile=latency ./collector start
#collector.startupEnvVars = LD_PRELOAD=/usr/lib64/libonload.so, EF_POLL_USEC=100000, EF_RXQ_SIZE=2048


############################################################
# 北交所DBF行情库(NQHQ)配置
############################################################

[BseDBF]
dbfPath = ${BSE_DBF_NQHQ_PATH}


############################################################
# 静态数据配置
############################################################

[static_files]
enable = true

# 上交所产品文件是否必须被加载, 默认非必须加载
sse.securityFile.isRequired = no
sse.stock.filePath = ${APP_HOME}/data/exchange
sse.option.filePath = ${APP_HOME}/data/exchange

# 深交所产品文件是否必须被加载, 默认非必须加载
szse.securityFile.isRequired = no
szse.stock.filePath = ${APP_HOME}/data/exchange
szse.option.filePath = ${APP_HOME}/data/exchange

# 北交所产品文件是否必须被加载, 默认非必须加载
bse.securityFile.isRequired = no
bse.stock.filePath = ${APP_HOME}/data/exchange


############################################################
# 主控程序（主控引擎）配置
############################################################

[engine.master]
name = 主控程序

## 定时器配置
[engine.master.timer]
name = MasterTimer
enable = true
interval = 3000
delayTime = 10
detachedLog = false

## 异步日志写入器
[engine.master.async_log_writer]
name = 异步日志写入器
enable = true
interval = 0
delayTime = 0
detachedLog = false


############################################################
# 定时任务调度器配置
############################################################

[engine.scheduler]
name = 定时任务调度器

## 定时任务调度处理器配置
[engine.scheduler.task_scheduler]
name = 定时任务调度器 (处理器)
enable = true
interval = 3000
delayTime = 10
detachedLog = false


############################################################
# 行情采集器
############################################################

[engine.collector]
name = 行情采集引擎

## SZSE MDGW-BINARY 行情采集处理器的处理器配置
[engine.collector.szse_l1]
name = SZSE_L1
enable = ${SZSE_L1_MDGW_IP_1:!${SZSE_L1_MDGW_IP_2:!no}${SZSE_L1_MDGW_IP_2:+yes}}${SZSE_L1_MDGW_IP_1:+yes}
interval = 5000
delayTime = 3
detachedLog = false

tcpServer.ipList = ${SZSE_L1_MDGW_IP_1} ${SZSE_L1_MDGW_IP_2}
tcpServer.portList = ${SZSE_L1_MDGW_PORT}
tcpServer.portList.1 = ${SZSE_L1_MDGW_PORT_1}
tcpServer.portList.2 = ${SZSE_L1_MDGW_PORT_2}

senderCompId = MDS
targetCompId.1 = ${SZSE_L1_MDGW_ID_1}
targetCompId.2 = ${SZSE_L1_MDGW_ID_2}
password.1 = ${SZSE_L1_MDGW_PASSWORD_1}
password.2 = ${SZSE_L1_MDGW_PASSWORD_2}

# 集群地址类型 (1: 冷备/温备的主备节点地址, 2: 多路择优的对等节点地址, 0: 默认为冷备/温备的主备节点地址)
clusterType = 0
#heartBtInt = 90
uplinkHeartBtInt = 3600
downlinkHeartBtInt = 60

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


## SSE MDGW-BINARY 行情采集处理器的处理器配置
[engine.collector.sse_mdgw]
name = SSE_MDGW
enable = ${SSE_MDGW_IP_1:!${SSE_MDGW_IP_2:!no}${SSE_MDGW_IP_2:+yes}}${SSE_MDGW_IP_1:+yes}
interval = 5000
delayTime = 3
detachedLog = false

tcpServer.ipList = ${SSE_MDGW_IP_1} ${SSE_MDGW_IP_2}
tcpServer.portList = ${SSE_MDGW_PORT}
tcpServer.portList.1 = ${SSE_MDGW_PORT_1}
tcpServer.portList.2 = ${SSE_MDGW_PORT_2}

senderCompId = MDS
targetCompId = MDGW
password =

# 集群地址类型 (1: 冷备/温备的主备节点地址, 2: 多路择优的对等节点地址, 0: 默认为冷备/温备的主备节点地址)
clusterType = 0
heartBtInt = 60

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


## BSE DBF 行情采集处理器的处理器配置
[engine.collector.bse_dbf]
name = BSE_DBF
enable = ${BSE_DBF_NQHQ_PATH:!no}${BSE_DBF_NQHQ_PATH:+yes}
interval = 5000
delayTime = 3
detachedLog = false


## 级联的 MDS-TCP 行情采集处理器的处理器配置
[engine.collector.mds_tcp]
name = MDS-CASCADE-TCP
enable = ${CASCADE_MDS_TCP_ADDR:!no}${CASCADE_MDS_TCP_ADDR:+yes}
interval = 5000
delayTime = 3
detachedLog = false

tcpServer.L1 = ${CASCADE_MDS_TCP_ADDR}
tcpServer.L2.1 = ${CASCADE_MDS_TCP_ADDR}
tcpServer.L2.2 = ${CASCADE_MDS_TCP_ADDR}
#tcpServer.L2.3 = ${CASCADE_MDS_TCP_ADDR}
#tcpServer.L2.4 = ${CASCADE_MDS_TCP_ADDR}
tcpServer.Tick.1 = ${CASCADE_MDS_TCP_ADDR}
tcpServer.Tick.2 = ${CASCADE_MDS_TCP_ADDR}
tcpServer.Tick.3 = ${CASCADE_MDS_TCP_ADDR}
tcpServer.Tick.4 = ${CASCADE_MDS_TCP_ADDR}

username = ${CASCADE_MDS_TCP_USERNAME}
password = ${CASCADE_MDS_TCP_PASSWORD}

# 行情服务器集群的集群类型 (1: 基于复制集的高可用集群, 2: 基于对等节点的服务器集群, 0: 默认为基于复制集的高可用集群)
clusterType = 0
heartBtInt = 60

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9

## 通用的行情订阅参数
sse.stock.enable = false
sse.index.enable = false
sse.option.enable = false
szse.stock.enable = false
szse.index.enable = false
szse.option.enable = false
bse.stock.enable = false
bse.index.enable = false

# 订阅模式 (0: 设置为订阅列表中的股票, 1: 增加订阅列表中的股票, 2: 删除订阅列表中的股票)
mktData.subMode = 0

# 快照行情数据模式 (0: 订阅最新快照并忽略重复或过时数据, 1: 订阅最新快照并立即发送, 2: 订阅所有时点的快照行情数据)
# - 推荐使用模式 0 或 2. 如果希望订阅到所有时点的快照行情, 可以设置 tickType=2
mktData.tickType = 2

# 逐笔数据的数据重建标识 (标识是否订阅重建到的逐笔数据)
# (0: 不订阅重建到的逐笔数据或重复的逐笔数据, 1: 订阅重建到的逐笔数据和重复的逐笔数据,
#  2: 只订阅重建到的逐笔数据(@note 需要通过压缩行情端口进行订阅, 非压缩行情和组播行情不支持该选项))
# @deprecated 已过时, 建议固定设置为0, 并通过逐笔数据重传接口来重传缺失的逐笔数据
mktData.tickRebuildFlag = 0

# 订阅的数据种类
# (0:所有, 1:L1快照/指数/期权, 2:L2快照, 4:L2委托队列, 8:逐笔成交,
#  0x10:深交所逐笔委托, 0x20:上交所逐笔委托, 0x40:L2市场总览, 0x80:逐笔频道心跳消息,
#  0x100:市场状态, 0x200:证券实时状态, 0x400:指数行情, 0x800:期权行情)
# 要订阅多个数据种类, 可以用逗号或空格分隔, 或者设置为并集值, 如:
# "mktData.dataTypes = 1,2,4" 或等价的 "mktData.dataTypes = 0x07"
#mktData.dataTypes = 0

# 请求订阅的行情数据的起始时间 (格式: HHMMSS 或 HHMMSSsss)
# (-1: 从头开始获取, 0: 从最新位置开始获取实时行情, 大于0: 从指定的起始时间开始获取)
mktData.beginTime = 0

# 在推送实时行情数据之前, 是否需要推送已订阅产品的初始的快照行情
mktData.isRequireInitialMktData = 0

# 待订阅的内部频道号 (取值范围{0,1,2,4,8}, 0或0xFF订阅所有, 配置方式与 dataTypes 类似)
mktData.channelNos = 0

## tcpServer.L1 特殊的行情订阅参数
tcpServer.L1.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.L1.sse.index.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.L1.sse.option.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.L1.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.L1.szse.index.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.L1.szse.option.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.L1.bse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_BSE:-0}
tcpServer.L1.bse.index.enable = ${CASCADE_MDS_TCP_ENABLE_BSE:-0}
tcpServer.L1.mktData.dataTypes = 1,0x100,0x200

## tcpServer.L2 特殊的行情订阅参数
tcpServer.L2.1.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.L2.2.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.L2.3.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.L2.4.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.L2.1.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.L2.2.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.L2.3.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.L2.4.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.L2.1.mktData.dataTypes = 2,4,0x40
tcpServer.L2.2.mktData.dataTypes = 2,4,0x40
tcpServer.L2.3.mktData.dataTypes = 2,4,0x40
tcpServer.L2.4.mktData.dataTypes = 2,4,0x40

tcpServer.L2.1.mktData.channelNos = 1,4
tcpServer.L2.2.mktData.channelNos = 2,8
tcpServer.L2.3.mktData.channelNos = 4
tcpServer.L2.4.mktData.channelNos = 8

## tcpServer.Tick 特殊的行情订阅参数
tcpServer.Tick.1.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.Tick.2.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.Tick.3.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.Tick.4.sse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SSE:-0}
tcpServer.Tick.1.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.Tick.2.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.Tick.3.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.Tick.4.szse.stock.enable = ${CASCADE_MDS_TCP_ENABLE_SZSE:-0}
tcpServer.Tick.1.mktData.dataTypes = 8,0x10,0x20,0x80
tcpServer.Tick.2.mktData.dataTypes = 8,0x10,0x20,0x80
tcpServer.Tick.3.mktData.dataTypes = 8,0x10,0x20,0x80
tcpServer.Tick.4.mktData.dataTypes = 8,0x10,0x20,0x80

tcpServer.Tick.1.mktData.channelNos = 1
tcpServer.Tick.2.mktData.channelNos = 2
tcpServer.Tick.3.mktData.channelNos = 4
tcpServer.Tick.4.mktData.channelNos = 8

## 异步API配置
# 异步队列的大小 (可缓存的消息数量)
#asyncQueueSize = 100000
# 是否优先使用大页内存来创建异步队列 (预期大页页面大小为2MB)
#isHugepageAble = no

# 异步I/O线程配置 (可选配置)
ioThread.enable = no                    # I/O线程的使能标志
ioThread.isOutputSimplify = no          # 是否采用精简模式输出数据
ioThread.isAppendMode = no              # 是否采用追加模式输出数据
ioThread.isIoThreadBusyPollAble = no    # I/O线程是否使用忙等待模式 (仅用于延迟测量场景, 否则I/O线程没有必要使用忙等待模式)
ioThread.dataOutputFormat = json        # 数据输出格式 (json, csv, poc, binary, none)
# 数据文件路径 (为空:不输出数据; stdout/stderr:标准输出)
#ioThread.dataOutputPath = ./cascade_tcp_data.txt
# 统计信息文件路径 (为空:默认输出到日志文件中; stdout/stderr:标准输出)
#ioThread.statsOutputPath = ./cascade_tcp_stats.txt


## 级联的 MDS-UDP 行情采集处理器的处理器配置
[engine.collector.mds_udp]
name = MDS-CASCADE-UDP
enable = ${CASCADE_MDS_UDP_ANY:!no}${CASCADE_MDS_UDP_ANY:+yes}
interval = 5000
delayTime = 2
detachedLog = false

udpServer.Snap1 = ${CASCADE_MDS_UDP_SNAP1_ADDR}
udpServer.Snap2 = ${CASCADE_MDS_UDP_SNAP2_ADDR}
udpServer.Tick1 = ${CASCADE_MDS_UDP_TICK1_ADDR}
udpServer.Tick2 = ${CASCADE_MDS_UDP_TICK2_ADDR}
heartBtInt = 180

soRcvbuf = 8192
soSndbuf = 1024
mcastInterfaceIp = ${CASCADE_MDS_UDP_INTERFACE_IP}

## 异步API配置
# 异步队列的大小 (可缓存的消息数量)
#asyncQueueSize = 100000
# 是否优先使用大页内存来创建异步队列 (预期大页页面大小为2MB)
#isHugepageAble = no

# 异步I/O线程配置 (可选配置)
ioThread.enable = no                    # I/O线程的使能标志
ioThread.isOutputSimplify = no          # 是否采用精简模式输出数据
ioThread.isAppendMode = no              # 是否采用追加模式输出数据
ioThread.isIoThreadBusyPollAble = no    # I/O线程是否使用忙等待模式 (仅用于延迟测量场景, 否则I/O线程没有必要使用忙等待模式)
ioThread.dataOutputFormat = json        # 数据输出格式 (json, csv, poc, binary, none)
# 数据文件路径 (为空:不输出数据; stdout/stderr:标准输出)
#ioThread.dataOutputPath = ./cascade_udp_data.txt
# 统计信息文件路径 (为空:默认输出到日志文件中; stdout/stderr:标准输出)
#ioThread.statsOutputPath = ./cascade_udp_stats.txt


############################################################
# 上交所 Level2 行情采集器
############################################################

[engine.l2_collector_sse]
name = Level2行情采集引擎

## 上交所 VDE-Level2 行情采集处理器配置 (01)
[engine.l2_collector_sse.sse_l2]
name = SSE_VDE_LEVEL2_01
enable = ${SSE_L2_VDE_ADDR:!no}${SSE_L2_VDE_ADDR:+yes}
interval = 5000
delayTime = 4
detachedLog = false

tcpServer = ${SSE_L2_VDE_ADDR}
senderCompId = VSS
targetCompId = VDE
password =

# 产品类别列表
# - 6:L2快照, 9:逐笔合并数据, 30:期权快照,
# - 38:债券快照, 39:债券逐笔, 11:L1-FAST快照, 54:债券L1-FAST快照, -:不指定产品类别
# 为空则默认订阅: 6,9,30,38,39
categoryList = 6,9,30,38,39

#heartBtInt = 30
uplinkHeartBtInt = 0
downlinkHeartBtInt = 30

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


## 上交所 VDE-Level2 行情采集处理器配置 (02)
[engine.l2_collector_sse.sse_l2_02]
name = SSE_VDE_LEVEL2_02
enable = ${SSE_L2_VDE_PARALLEL:!no}${SSE_L2_VDE_PARALLEL:+yes}
interval = 5000
delayTime = 4
detachedLog = false

tcpServer = ${SSE_L2_VDE_PARALLEL}
senderCompId = VSS
targetCompId = VDE
password =

# 产品类别列表
# - 6:L2快照, 9:逐笔合并数据, 30:期权快照,
# - 38:债券快照, 39:债券逐笔, 11:L1-FAST快照, 54:债券L1-FAST快照, -:不指定产品类别
# 为空则默认订阅: 6,9,30,38,39
categoryList = 6,9,30,38,39

#heartBtInt = 30
uplinkHeartBtInt = 0
downlinkHeartBtInt = 30

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


############################################################
# 深交所 Level2 行情采集器
############################################################

[engine.l2_collector_szse]
name = Level2行情采集引擎

## 深交所 MDGW-Level2 行情采集处理器配置
[engine.l2_collector_szse.szse_l2]
name = SZSE_MDGW_LEVEL2
enable = ${SZSE_L2_MDGW_IP_1:!${SZSE_L2_MDGW_IP_2:!no}${SZSE_L2_MDGW_IP_2:+yes}}${SZSE_L2_MDGW_IP_1:+yes}
interval = 5000
delayTime = 5
detachedLog = false

tcpServer.ipList = ${SZSE_L2_MDGW_IP_1} ${SZSE_L2_MDGW_IP_2}
tcpServer.portList = ${SZSE_L2_MDGW_PORT}
tcpServer.portList.1 = ${SZSE_L2_MDGW_PORT_1}
tcpServer.portList.2 = ${SZSE_L2_MDGW_PORT_2}

senderCompId = MDS
targetCompId.1 = ${SZSE_L2_MDGW_ID_1}
targetCompId.2 = ${SZSE_L2_MDGW_ID_2}
password.1 = ${SZSE_L2_MDGW_PASSWORD_1}
password.2 = ${SZSE_L2_MDGW_PASSWORD_2}

# 集群地址类型 (1: 冷备/温备的主备节点地址, 2: 多路择优的对等节点地址, 0: 默认为冷备/温备的主备节点地址)
clusterType = 0
#heartBtInt = 90
uplinkHeartBtInt = 3600
downlinkHeartBtInt = 60

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


## 深交所 MDGW-Level2 组播行情采集处理器配置
[engine.l2_collector_szse.szse_l2_mcast]
name = SZSE_MDGW_LEVEL2_MCAST
enable = ${SZSE_L2_MDGW_MCAST_IP_1:!${SZSE_L2_MDGW_MCAST_IP_2:!no}${SZSE_L2_MDGW_MCAST_IP_2:+yes}}${SZSE_L2_MDGW_MCAST_IP_1:+yes}
interval = 5000
delayTime = 5
detachedLog = false

tcpServer.ipList = ${SZSE_L2_MDGW_MCAST_IP_1} ${SZSE_L2_MDGW_MCAST_IP_2}
tcpServer.portList = ${SZSE_L2_MDGW_MCAST_PORT}
tcpServer.portList.1 = ${SZSE_L2_MDGW_MCAST_PORT_1}
tcpServer.portList.2 = ${SZSE_L2_MDGW_MCAST_PORT_2}
mcastInterfaceIp = ${SZSE_L2_MDGW_MCAST_INTERFACE_IP}
mcastInterfaceIp.1 = ${SZSE_L2_MDGW_MCAST_INTERFACE_IP_1}
mcastInterfaceIp.2 = ${SZSE_L2_MDGW_MCAST_INTERFACE_IP_2}

senderCompId = MDS
targetCompId = MDGW_MCAST

# 集群地址类型 (1: 冷备/温备的主备节点地址, 2: 多路择优的对等节点地址, 0: 默认为冷备/温备的主备节点地址)
clusterType = 0
heartBtInt = 30

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


############################################################
# 行情数据加工处理器
############################################################

[engine.processor]
name = 行情数据加工引擎

# 行情数据的分区数量
shardingCount = 1
# 行情数据的分区类型 (0:default, 1:TCP, 2:UDP)
shardingType = 0

[engine.processor.mktdata_processor]
name = 行情数据加工
enable = true
interval = 0
delayTime = 3
detachedLog = false

[engine.processor.txlog_handler]
name = 交易日志消息处理器
enable = true
interval = 0
delayTime = 3
detachedLog = false

[engine.processor.txlog_writer]
name = 交易日志写入器
enable = true
interval = 0
delayTime = 3
detachedLog = false


############################################################
# 行情发布器
############################################################

[engine.publisher]
name = 行情发布引擎

## 行情发布服务的处理器配置
[engine.publisher.publishing_server]
name = 行情发布服务（处理器）
enable = true
interval = 0
delayTime = 1
detachedLog = false

## 行情发布服务的服务器配置
[server.publishing_server]
name = 行情发布服务
serverUri = tcp://*:51${@@}
isNetByteOrder = false

soRcvbuf = 1024
soSndbuf = 1024
soBacklog = 1024
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 0
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9
tls.localCertChainPath = conf/tls_certs/server.pfx
#tls.privateKeyPath =
#tls.trustedCaCertsPath =
#tls.cipherSuites =                     # 国密算法套件: TLS_SM4_GCM_SM3,TLS_SM4_CCM_SM3
#tls.minTlsVersion =

sessionTimeout = -1                     # 会话超时时间(秒, 小于0则使用默认值)
serverTimeout = -1                      # 服务进程超时时间(秒, 小于0则使用默认值)
selectTimeout = -1                      # select/poll超时时间(毫秒, 小于0则使用默认值)
defaultPacketBufSize = 64               # 默认的每块报文缓存的大小(KB)
packetPoolKeepSize = 256                # 报文缓存池维持的最小缓存块数量
maxConnection = 256                     # 最大连接数量(每服务进程)
childrenNum = 1                         # 并发服务器的子服务进程数量
concurrencyMode = 0                     # 并发服务器的并发模型(0:DEFAULT, 1:Parent-Child, 2:Multi-Reactor, 3:Reuseport)
shmResourceId = -1                      # 并发服务器的共享内存代码(小于0则禁止自动创建共享内存)
asyncSendBufSize = 512                  # 异步应答器的发送缓存大小(KB)
asyncBusyPollLevel = 0                  # 异步应答器的忙等待级别(0:BUSY_WAITING, 1:SCHED_YIELD, 2:SLEEP_YIELD, 3:SLEEP)
isAsyncResponserTimeoutAble = FALSE     # 是否通过异步服务器的应答线程执行会话超时检查 (默认通过监听线程执行超时检查)
maxAsyncBusyPollCount = 0               # 异步应答器的最大忙等待轮询次数
maxReactorBusyPollCount = 0             # 反应器的最大忙等待轮询次数

[server.publishing_server.interceptors]
transport.enable = true


############################################################
# 行情转发器
############################################################

[engine.forwarder]
name = 行情转发引擎

## 低速网络行情转发服务的处理器配置
[engine.forwarder.lowspeed_forwarder]
name = 低速网络行情转发服务（处理器）
enable = true
interval = 0
delayTime = 1
detachedLog = false

## 低速网络行情转发服务的服务器配置
[server.lowspeed_forwarder]
name = 低速网络行情转发服务
serverUri = tcp://*:54${@@}
isNetByteOrder = false

soRcvbuf = 1024
soSndbuf = 1024
soBacklog = 1024
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 0
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9
tls.localCertChainPath = conf/tls_certs/server.pfx
#tls.privateKeyPath =
#tls.trustedCaCertsPath =
#tls.cipherSuites =                     # 国密算法套件: TLS_SM4_GCM_SM3,TLS_SM4_CCM_SM3
#tls.minTlsVersion =

sessionTimeout = -1                     # 会话超时时间(秒, 小于0则使用默认值)
serverTimeout = -1                      # 服务进程超时时间(秒, 小于0则使用默认值)
selectTimeout = -1                      # select/poll超时时间(毫秒, 小于0则使用默认值)
defaultPacketBufSize = 64               # 默认的每块报文缓存的大小(KB)
packetPoolKeepSize = 256                # 报文缓存池维持的最小缓存块数量
maxConnection = 256                     # 最大连接数量(每服务进程)
childrenNum = 1                         # 并发服务器的子服务进程数量
concurrencyMode = 0                     # 并发服务器的并发模型(0:DEFAULT, 1:Parent-Child, 2:Multi-Reactor, 3:Reuseport)
shmResourceId = -1                      # 并发服务器的共享内存代码(小于0则禁止自动创建共享内存)
asyncSendBufSize = 512                  # 异步应答器的发送缓存大小(KB)
asyncBusyPollLevel = 2                  # 异步应答器的忙等待级别(0:BUSY_WAITING, 1:SCHED_YIELD, 2:SLEEP_YIELD, 3:SLEEP)
isAsyncResponserTimeoutAble = FALSE     # 是否通过异步服务器的应答线程执行会话超时检查 (默认通过监听线程执行超时检查)
maxAsyncBusyPollCount = 0               # 异步应答器的最大忙等待轮询次数
maxReactorBusyPollCount = 0             # 反应器的最大忙等待轮询次数

[server.lowspeed_forwarder.interceptors]
transport.enable = true


############################################################
# 行情广播器
############################################################

[engine.broadcaster]
name = 行情广播引擎

## UDP Socket参数配置
soRcvbuf = 1024
soSndbuf = 8192
mcastTtlNum = 3
mcastLoopbackDisabled = 0
mcastInterfaceIp = ${MDS_BROADCAST_INTERFACE_IP}

# UDP行情广播的报文发送间隔时间(微秒)
udpPktIntervalUs = 0


## UDP行情广播的处理器配置 (快照-频道1)
[engine.broadcaster.udp_broadcaster_snap1]
name = UDP行情广播（Snap1）
enable = ${MDS_BROADCAST_ADDR_SNAP1:!no}${MDS_BROADCAST_ADDR_SNAP1:+yes}
interval = 0
delayTime = 5
detachedLog = false

# UDP行情广播地址
associate.uri = ${MDS_BROADCAST_ADDR_SNAP1}
localSendingPort = 5301


## UDP行情广播的处理器配置 (快照-频道2)
[engine.broadcaster.udp_broadcaster_snap2]
name = UDP行情广播（Snap2）
enable = ${MDS_BROADCAST_ADDR_SNAP2:!no}${MDS_BROADCAST_ADDR_SNAP2:+yes}
interval = 0
delayTime = 5
detachedLog = false

# UDP行情广播地址
associate.uri = ${MDS_BROADCAST_ADDR_SNAP2}
localSendingPort = 5302


## UDP行情广播的处理器配置 (逐笔-频道1)
[engine.broadcaster.udp_broadcaster_tick1]
name = UDP行情广播（Tick1）
enable = ${MDS_BROADCAST_ADDR_TICK1:!no}${MDS_BROADCAST_ADDR_TICK1:+yes}
interval = 0
delayTime = 5
detachedLog = false

# UDP行情广播地址
associate.uri = ${MDS_BROADCAST_ADDR_TICK1}
localSendingPort = 5303


## UDP行情广播的处理器配置 (逐笔-频道2)
[engine.broadcaster.udp_broadcaster_tick2]
name = UDP行情广播（Tick2）
enable = ${MDS_BROADCAST_ADDR_TICK2:!no}${MDS_BROADCAST_ADDR_TICK2:+yes}
interval = 0
delayTime = 5
detachedLog = false

# UDP行情广播地址
associate.uri = ${MDS_BROADCAST_ADDR_TICK2}
localSendingPort = 5304


## UDP行情广播的处理器配置 (订单簿快照-频道1)
[engine.broadcaster.udp_broadcaster_lob_snap1]
name = UDP行情广播（LobSnap1）
enable = ${MDS_BROADCAST_ADDR_LOB_SNAP1:!no}${MDS_BROADCAST_ADDR_LOB_SNAP1:+yes}
interval = 0
delayTime = 5
detachedLog = false

# UDP行情广播地址
associate.uri = ${MDS_BROADCAST_ADDR_LOB_SNAP1}
localSendingPort = 5311
mcastInterfaceIp = ${MDS_BROADCAST_INTERFACE_IP_LOB_SNAP}


## UDP行情广播的处理器配置 (订单簿快照-频道2)
[engine.broadcaster.udp_broadcaster_lob_snap2]
name = UDP行情广播（LobSnap2）
enable = ${MDS_BROADCAST_ADDR_LOB_SNAP2:!no}${MDS_BROADCAST_ADDR_LOB_SNAP2:+yes}
interval = 0
delayTime = 5
detachedLog = false

# UDP行情广播地址
associate.uri = ${MDS_BROADCAST_ADDR_LOB_SNAP2}
localSendingPort = 5312
mcastInterfaceIp = ${MDS_BROADCAST_INTERFACE_IP_LOB_SNAP}


############################################################
# 查询服务 - 引擎
############################################################

[engine.querier]
name = 查询服务

# 登录时的最大时间同步轮次 (0:禁用时间同步, -1:使用默认值)
#maxTimeSyncRound = 5

## 处理器配置
[engine.querier.query_server]
name = 查询服务（处理器）
enable = true
interval = 0
delayTime = 1
detachedLog = false

## 监听服务配置
[server.query_server]
name = 查询服务
serverUri = tcp://*:52${@@}
isNetByteOrder = false

soRcvbuf = 1024
soSndbuf = 1024
soBacklog = 1024
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 0
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9
tls.localCertChainPath = conf/tls_certs/server.pfx
#tls.privateKeyPath =
#tls.trustedCaCertsPath =
#tls.cipherSuites =                     # 国密算法套件: TLS_SM4_GCM_SM3,TLS_SM4_CCM_SM3
#tls.minTlsVersion =

sessionTimeout = -1                     # 会话超时时间(秒, 小于0则使用默认值)
serverTimeout = -1                      # 服务进程超时时间(秒, 小于0则使用默认值)
selectTimeout = -1                      # select/poll超时时间(毫秒, 小于0则使用默认值)
defaultPacketBufSize = 256              # 默认的每块报文缓存的大小(KB)
packetPoolKeepSize = 256                # 报文缓存池维持的最小缓存块数量
maxConnection = 256                     # 最大连接数量(每服务进程)
childrenNum = 1                         # 并发服务器的子服务进程数量
concurrencyMode = 0                     # 并发服务器的并发模型(0:DEFAULT, 1:Parent-Child, 2:Multi-Reactor, 3:Reuseport)
shmResourceId = -1                      # 并发服务器的共享内存代码(小于0则禁止自动创建共享内存)

[server.query_server.interceptors]
transport.enable = true
traffic.enable = true
compress.enable = true
timer.enable = false


############################################################
# 监控服务 - 引擎
############################################################

[engine.monagent]
name = 监控服务
client.username = monitor
# 密码支持明文和MD5两种格式 (如 txt:XXX 或 md5:XXX..., 不带前缀则默认为明文)
client.password = md5:e10adc3949ba59abbe56e057f20f883e

## 处理器配置
[engine.monagent.monagent_server]
name = 监控服务（处理器）
enable = true
interval = 0
delayTime = 1
detachedLog = false

## 监听服务配置
[server.monagent_server]
name = 监控服务
serverUri = tcp://*:59${@@}
isNetByteOrder = false

soRcvbuf = 1024
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 0
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9
tls.localCertChainPath = conf/tls_certs/server.pfx
#tls.privateKeyPath =
#tls.trustedCaCertsPath =
#tls.cipherSuites =                     # 国密算法套件: TLS_SM4_GCM_SM3,TLS_SM4_CCM_SM3
#tls.minTlsVersion =

sessionTimeout = -1                     # 会话超时时间(秒, 小于0则使用默认值)
serverTimeout = -1                      # 服务进程超时时间(秒, 小于0则使用默认值)
selectTimeout = -1                      # select/poll超时时间(毫秒, 小于0则使用默认值)
defaultPacketBufSize = 512              # 默认的每块报文缓存的大小(KB)
packetPoolKeepSize = 64                 # 报文缓存池维持的最小缓存块数量
maxConnection = 64                      # 最大连接数量(每服务进程)

[server.monagent_server.interceptors]
transport.enable = true


## 处理器配置
[engine.monagent.log_monitor_server]
name = 日志监控服务（处理器）
enable = true
interval = 0
delayTime = 1
detachedLog = false

# 推送日志的最低级别，默认 BZWRN
logLevelThresholdMin = ERROR

### 监听服务配置
[server.log_monitor_server]
name = 日志监控服务
serverUri = tcp://*:55${@@}
isNetByteOrder = false

soRcvbuf = 1024
soSndbuf = 8192
soBacklog = 1024
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 0
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9
tls.localCertChainPath = conf/tls_certs/server.pfx
#tls.privateKeyPath =
#tls.trustedCaCertsPath =
#tls.cipherSuites =                     # 国密算法套件: TLS_SM4_GCM_SM3,TLS_SM4_CCM_SM3
#tls.minTlsVersion =

sessionTimeout = -1                     # 会话超时时间(秒, 小于0则使用默认值)
serverTimeout = -1                      # 服务进程超时时间(秒, 小于0则使用默认值)
selectTimeout = -1                      # select/poll超时时间(毫秒, 小于0则使用默认值)
defaultPacketBufSize = 512              # 默认的每块报文缓存的大小(KB)
packetPoolKeepSize = 16                 # 报文缓存池维持的最小缓存块数量
maxConnection = 16                      # 最大连接数量(每服务进程)
asyncSendBufSize = 2048                 # 异步应答器的发送缓存大小(KB)
asyncBusyPollLevel = 50                 # 异步应答器的忙等待级别(0:BUSY_WAITING, 1:SCHED_YIELD, 2:SLEEP_YIELD, 3:SLEEP)
isAsyncResponserTimeoutAble = FALSE     # 是否通过异步服务器的应答线程执行会话超时检查 (默认通过监听线程执行超时检查)
maxAsyncBusyPollCount = 0               # 异步应答器的最大忙等待轮询次数
maxReactorBusyPollCount = 0             # 反应器的最大忙等待轮询次数

[server.log_monitor_server.interceptors]
transport.enable = true


############################################################
# 定序器 - 引擎
############################################################

[engine.sequencer]
name = 定序器

# 用于 broadcaster, leaner, proposer 三者的UDP/TCP套接字参数
soRcvbuf = 8192
soSndbuf = 8192
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 0
keepalive = 1
keepIdle = 30                           # 超时时间 (秒)
keepIntvl = 5                           # 间隔时间 (秒)
keepCnt = 6                             # 尝试次数
mcastTtlNum = 3                         # mutilcast TTL number
mcastLoopbackDisabled = 0               # disable mutilcast loopback, 0 or 1
mcastInterfaceIp = ${IP_ADDR_${!!}}     # 用于收发集群间组播消息的网络设备接口的IP地址
#localSendingIp = ${IP_ADDR_${!!}}      # 本地绑定的网络设备接口的IP地址 (适用于发送端)

# 数据复制时的每数据包最大消息数量
maxItemPerPacket = 20

# 当选举完成准备切换主机时, 是否允许从节点的数据与主节点存在不一致的情况
isUnconsistencyAbleOnSwitching = yes

# 当选举完成准备切换主机时, 是否要求主/从节点的交易日期必须一致
isCheckTradingDateOnSwitching = yes

# 禁止提案学习器对接本机回环地址 (默认允许对接)
#disableLearnLocalHost = no

# 禁止检查集群内部的广播消息是否超时 (默认检查广播消息是否超时)
disableBroadcastTimeoutCheck = yes

# 定序器的忙等待级别 (0:BUSY_WAITING, 1:SCHED_YIELD, 2:SLEEP_YIELD, 3:SLEEP)
busyPollLevel = 50


## 定序提案确认服务的处理器配置
[engine.sequencer.acceptor]
name = 提案确认服务（处理器）
enable = true
interval = 0
delayTime = 1
detachedLog = false

## 定序提案确认的广播器配置
[engine.sequencer.broadcaster]
name = 提案确认广播器
enable = true
interval = 0
delayTime = 3
detachedLog = false

# 提案确认广播地址
associate.uri = udp-mcast://239.1.2.1${++}:55${!!}


## 定序提案确认的学习器配置
[engine.sequencer.leaner]
name = 提案确认学习器
enable = true
interval = 0
delayTime = 2
detachedLog = false

# 提案确认广播地址
associate.1.uri = udp-mcast://239.1.2.1${++}:5501
associate.2.uri = udp-mcast://239.1.2.1${++}:5502
associate.3.uri = udp-mcast://239.1.2.1${++}:5503
associate.4.uri = udp-mcast://239.1.2.1${++}:5504
associate.5.uri = udp-mcast://239.1.2.1${++}:5505
associate.6.uri = udp-mcast://239.1.2.1${++}:5506
associate.7.uri = udp-mcast://239.1.2.1${++}:5507


## 定序提案复制器配置
[engine.sequencer.proposer]
name = 定序提案复制器
enable = true
interval = 5000
delayTime = 5
detachedLog = false

# 交易主/备机的提案确认服务地址
associate.1.uri = tcp://${IP_ADDR_01}:56${ENV_NUM_01}
associate.2.uri = tcp://${IP_ADDR_02}:56${ENV_NUM_02}
associate.3.uri = tcp://${IP_ADDR_03}:56${ENV_NUM_03}
associate.4.uri = tcp://${IP_ADDR_04}:56${ENV_NUM_04}
associate.5.uri = tcp://${IP_ADDR_05}:56${ENV_NUM_05}
associate.6.uri = tcp://${IP_ADDR_06}:56${ENV_NUM_06}
associate.7.uri = tcp://${IP_ADDR_07}:56${ENV_NUM_07}


## 定序提案接受器（监听服务）配置
[server.sequencer.acceptor]
name = 定序提案接受器
serverUri = tcp://*:56${@@}
isNetByteOrder = false

soRcvbuf = 8192
soSndbuf = 8192
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 60
keepIntvl = 5
keepCnt = 9

sessionTimeout = -1                     # 会话超时时间(秒, 小于0则使用默认值)
serverTimeout = -1                      # 服务进程超时时间(秒, 小于0则使用默认值)
selectTimeout = -1                      # select/poll超时时间(毫秒, 小于0则使用默认值)
defaultPacketBufSize = 64               # 默认的每块报文缓存的大小(KB)
packetPoolKeepSize = 16                 # 报文缓存池维持的最小缓存块数量
maxConnection = 16                      # 最大连接数量(每服务进程)

[server.acceptor.interceptors]
transport.enable = true
timer.enable = false


############################################################
# 逐笔数据存储引擎
# @note 逐笔数据存储子系统必须运行, 否则会因为缓存队列写满而导致系统夯住
############################################################

[engine.tick_store]
name = 逐笔数据存储引擎

# 逐笔数据存储的根目录
storage.rootDir = ${APP_HOME}/storage/tickdata

[engine.tick_store.tick_data_marshaling]
name = 逐笔数据编排处理器
enable = true
interval = 0
delayTime = 3
detachedLog = false

[engine.tick_store.tick_data_writer]
name = 逐笔数据持久化处理器
enable = true
interval = 0
delayTime = 3
detachedLog = false


## 逐笔数据重建相关的处理器配置
!CALL   ${MDS_ANY_TICK_REBUILD_ADDR:=${SSE_L2_REBUILD_ADDR}}
!CALL   ${MDS_ANY_TICK_REBUILD_ADDR:=${SZSE_L2_REBUILD_ADDR}}
!CALL   ${MDS_ANY_TICK_REBUILD_ADDR:=${CASCADE_MDS_RESEND_ADDR}}

[engine.tick_store.streaming_rebuilded_tick]
name = 入流重建到的逐笔数据
enable = ${MDS_ANY_TICK_REBUILD_ADDR:+yes}${MDS_ANY_TICK_REBUILD_ADDR:!no}
interval = 0
delayTime = 3
detachedLog = false


## 逐笔存储器上交所数据重建
[engine.tick_store.storer_sse_rebuild]
name = 逐笔存储器上交所数据重建
enable = ${SSE_L2_REBUILD_ADDR:!no}${SSE_L2_REBUILD_ADDR:+yes}
interval = 5000
delayTime = 5
detachedLog = false

tcpServer = ${SSE_L2_REBUILD_ADDR}
senderCompId = VSS
targetCompId = VDE
password =
heartBtInt = 60

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


## 逐笔存储器深交所数据重建
[engine.tick_store.storer_szse_rebuild]
name = 逐笔存储器深交所数据重建
enable = ${SZSE_L2_REBUILD_ADDR:!no}${SZSE_L2_REBUILD_ADDR:+yes}
interval = 5000
delayTime = 5
detachedLog = false

tcpServer = ${SZSE_L2_REBUILD_ADDR}
senderCompId = MDS
targetCompId.1 = ${SZSE_L2_MDGW_ID_1}
targetCompId.2 = ${SZSE_L2_MDGW_ID_2}
password.1 = ${SZSE_L2_MDGW_PASSWORD_1}
password.2 = ${SZSE_L2_MDGW_PASSWORD_2}
heartBtInt = 60

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


## 基于级联MDS的逐笔存储器上交所逐笔数据级联重建处理器配置
[engine.tick_store.storer_cascade_rebuild_sse]
name = 逐笔存储器上交所数据级联重建
enable = ${CASCADE_MDS_RESEND_ADDR:!no}${CASCADE_MDS_RESEND_ADDR:+${CASCADE_MDS_RESEND_ENABLE_SSE:-no}}
interval = 5000
delayTime = 3
detachedLog = false

qryServer = ${CASCADE_MDS_RESEND_ADDR}
username = ${CASCADE_MDS_RESEND_USERNAME}
password = ${CASCADE_MDS_RESEND_PASSWORD}
senderCompId = STORER-CASCADE-REBUILD-SSE
targetCompId = CASCADE-SERVER
heartBtInt = 30

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


## 基于级联MDS的逐笔存储器深交所逐笔数据级联重建处理器配置
[engine.tick_store.storer_cascade_rebuild_szse]
name = 逐笔存储器深交所数据级联重建
enable = ${CASCADE_MDS_RESEND_ADDR:!no}${CASCADE_MDS_RESEND_ADDR:+${CASCADE_MDS_RESEND_ENABLE_SZSE:-no}}
interval = 5000
delayTime = 3
detachedLog = false

qryServer = ${CASCADE_MDS_RESEND_ADDR}
username = ${CASCADE_MDS_RESEND_USERNAME}
password = ${CASCADE_MDS_RESEND_PASSWORD}
senderCompId = STORER-CASCADE-REBUILD-SZSE
targetCompId = CASCADE-SERVER
heartBtInt = 30

soRcvbuf = 8192
soSndbuf = 1024
soBacklog = 256
connTimeoutMs = 5000
tcpNodelay = 1
quickAck = 1
keepalive = 1
keepIdle = 90
keepIntvl = 10
keepCnt = 9


############################################################
# 订单簿引擎
#
# - 订单簿重建功能的配置需求:
#   - 最低硬件配置需求: CPU 核心数 14C * 2, 物理内存  64G, 磁盘存储容量 400G
#   - 建议硬件配置需求: CPU 核心数 16C * 2, 物理内存 128G, 磁盘存储容量 800G 以上
#   - 建议磁盘存储方案: (按推荐顺序排列)
#       1) SSD-RAID50 (性能最好, 容量最大, 成本最高)
#       2) SSD-RAID5  (性能较好, 容量较大, 成本较高)
#       3) HDD-RAID50 (性能较好, 容量最大, 性价比最高)
#
# - 注意事项说明:
#   - 订单簿快照行情只支持通过UDP组播方式推送, 或者通过查询服务查询获取, 不支持TCP协议的行情订阅和推送
#     (如果尚未开通行情组播网络, 也可以启用订单簿重建功能, 只是客户需要通过查询的方式获取订单簿快照行情)
#   - 如果CPU核心数量和物理内存大小不足以支持订单簿重建功能, 需要通过配置变量 NO_ORDER_BOOK 禁用订单簿重建功能
#   - 生产环境需要留意检查 SDB 主存库配置和 CPU 亲和性配置是否符合预期
############################################################

[engine.order_book]
name = 订单簿引擎

# 订单簿快照生成的最小时间周期 (毫秒, 小于等于0则使用默认值: 100)
snapshotCycleTimeMs = -1

# 待跟踪的订单簿证券代码列表 (仅用于调试, 以逗号分割的字符串, '*' 订阅所有证券)
lobTraceSecurities =

[engine.order_book.order_book_reconstruction]
name = 订单簿重建处理器
enable = true
interval = 0
delayTime = 3
detachedLog = false

[engine.order_book.order_book_snapshot]
name = 订单簿快照生成处理器
enable = true
interval = 0
delayTime = 3
detachedLog = false


############################################################
# 延迟统计引擎
############################################################

[engine.latency]
name = 延迟统计引擎

[engine.latency.latencyStats]
name = 延迟统计处理器
enable = true
interval = 0
delayTime = 0
detachedLog = false


############################################################
# CPU亲和性设置
# - CPU编号从1开始, CPU编号列表以逗号或空格分割
# - 亲和性配置的使能标志 (全系统)
#   - cpuset.enable: 若未设置则默认启用亲和性设置
# - 默认的亲和性配置 (全系统)
#   - cpuset.default: CPU亲和性亲配置的默认值
# - 任务引擎 (TaskEngine)
#   - cpuset.engine.ENGINE_TAG.PROCESSOR_TAG
#   - 候选的CPU亲和性配置项: cpuset.engine.ENGINE_TAG
# - 并发服务器 (ConcurServer)
#   - 主服务进程的CPU亲和性配置项约定为: cpuset.server.SERVER_TAG[0]
#   - 子服务进程的CPU亲和性配置项约定为: cpuset.server.SERVER_TAG[CHILD_INDEX + 1]
#   - 候选的CPU亲和性配置项: cpuset.server.SERVER_TAG
# - 异步服务器 (AsyncServer)
#   - cpuset.server.SERVER_TAG[CHILD_INDEX + 1].Responser (被ConcurServer包裹时)
#   - cpuset.server.SERVER_TAG[CHILD_INDEX + 1].Reactor   (被ConcurServer包裹时)
#   - cpuset.server.SERVER_TAG[CHILD_INDEX + 1]           (被ConcurServer包裹时)
#   - cpuset.server.SERVER_TAG.Responser                  (未被ConcurServer包裹)
#   - cpuset.server.SERVER_TAG.Reactor                    (未被ConcurServer包裹)
#   - 候选的CPU亲和性配置项: cpuset.server.SERVER_TAG
############################################################

[cpuset]
enable = no
#default = 1

# 引入CPU亲和性配置
#INCLUDE  sample/cpuset/MDS_10C_0-9_SH.cpusets
#INCLUDE  sample/cpuset/MDS_10C_0-9_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_12C_0,2,4,6,8,...22_SH.cpusets
#INCLUDE  sample/cpuset/MDS_12C_0,2,4,6,8,...22_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_12C_0-11_1U_SH_Only.cpusets
#INCLUDE  sample/cpuset/MDS_12C_0-11_SH.cpusets
#INCLUDE  sample/cpuset/MDS_12C_0-11_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_12C_0-5,12-17_SH.cpusets
#INCLUDE  sample/cpuset/MDS_12C_0-5,12-17_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_14C_0,2,4,6,8,...26_SH.cpusets
#INCLUDE  sample/cpuset/MDS_14C_0,2,4,6,8,...26_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_16C_0,2,4,6,8,...30_SH.cpusets
#INCLUDE  sample/cpuset/MDS_16C_0,2,4,6,8,...30_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_16C_0-15_1U_SH.cpusets
#INCLUDE  sample/cpuset/MDS_16C_0-15_1U_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_16C_0-15_SH.cpusets
#INCLUDE  sample/cpuset/MDS_16C_0-15_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_18C_0,2,4,6,8,...34_SH.cpusets
#INCLUDE  sample/cpuset/MDS_18C_0,2,4,6,8,...34_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_18C_0-17_1U_SH.cpusets
#INCLUDE  sample/cpuset/MDS_18C_0-17_1U_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_18C_0-17_SH.cpusets
#INCLUDE  sample/cpuset/MDS_18C_0-17_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_6C_0-5.cpusets
#INCLUDE  sample/cpuset/MDS_8C_0,2,4,6,8,...14_TCP_SH.cpusets
#INCLUDE  sample/cpuset/MDS_8C_0,2,4,6,8,...14_TCP_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_8C_0,2,4,6,8,...14_UDP_SH.cpusets
#INCLUDE  sample/cpuset/MDS_8C_0,2,4,6,8,...14_UDP_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_8C_0-7_TCP_SH.cpusets
#INCLUDE  sample/cpuset/MDS_8C_0-7_TCP_SZ.cpusets
#INCLUDE  sample/cpuset/MDS_8C_0-7_UDP_SH.cpusets
#INCLUDE  sample/cpuset/MDS_8C_0-7_UDP_SZ.cpusets

# 适用于MDS_TLS行情网关的CPU亲和性配置
#INCLUDE  sample/cpuset/MDS_TLS_8C_0-7.cpusets
#INCLUDE  sample/cpuset/MDS_TLS_8C_0,2,4,6,8,...14.cpusets
#INCLUDE  sample/cpuset/MDS_TLS_10C_0-4,10-14.cpusets
#INCLUDE  sample/cpuset/MDS_TLS_12C_0-5,12-17.cpusets
